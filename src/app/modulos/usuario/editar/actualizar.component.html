<app-menu></app-menu> 

<div class="container-lg fadein animation-iteration-1 animation-duration-500">
    <p-breadcrumb class="m-2" [model]="items" [home]="home"></p-breadcrumb>
    <div class="row justify-content-center">
        <div class="col-md-8 mt-2">
            <div class="card shadow-sm mb-lg-4">
                     <div class="card-header" >  
                            <h3 class="text-center"></h3>

                            <div class="row" > 

                               <!--  Modifica el tamaño del formulario -->
                                <div class="col-md-7">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card shadow mb-lg-4">
                                                <div class="card-header bg-warning text-white text-center">
                                                    <i class="fa-solid fa-user-pen"></i>
                                                    Modficar usuario
                                                </div>


                                                <div class="card-body">
                                                    <form (ngSubmit)="onActualizar()" novalidate #f="ngForm">
                                                
                                                        <!--group apellido -->
                                                       <div class="form-group">
                                                           <label for="apellido">Apellido</label>
                                                           <input type="text" class="form-control mt-2" id="apellido" name="apellido"
                                                           [(ngModel)]="usuario.apellido" #ape = "ngModel" pattern="^[a-zA-Z-ÿ\u00f1\u00d1\u00E0-\u00FC ]{2,254}" required>              
                                                               
                                                           <div class="alert-danger rounded mt-2" *ngIf="ape.invalid && (ape.dirty || ape.touched)">
                                                            <div *ngIf="ape.errors?.required">
                                                                <i class="ms-1 bi-x-circle-fill"></i>
                                                                El apellido es requerido
                                                            </div>
                                                            <div *ngIf="ape.errors?.pattern">
                                                                <i class="ms-1 bi-x-circle-fill"></i>
                                                                    Solo se permiten letras
                                                            </div>
                                                        </div>
                                                       </div>
                                                       
                                                        <!--group Nombre -->

                                                       <div class="form-group">
                                                           <label for="nombre">Nombre</label>
                                                           <input type="text" class="form-control mt-2" id="nombre" name="nombre"
                                                           [(ngModel)]="usuario.nombre" #nom = "ngModel" pattern="^[a-zA-Z-ÿ\u00f1\u00d1\u00E0-\u00FC ]{2,254}" required>

                                                           <div class="alert-danger rounded mt-2" *ngIf="nom.invalid && (nom.dirty || nom.touched)">
                                                            <div *ngIf="nom.errors?.required">
                                                                <i class="ms-1 bi-x-circle-fill"></i>
                                                                El nombre es requerido
                                                            </div>
                                                            <div *ngIf="nom.errors?.pattern">
                                                                <i class="ms-1 bi-x-circle-fill"></i>
                                                                    Solo se permiten letras
                                                            </div>
                                                        </div>

                                                        </div>
                                                        
                                                         <!--group DNI -->

                                                       <div class="form-group">
                                                           <label for="dni">DNI</label>
                                                           <input type="text" class="form-control mt-2" id="dni" name="dni"
                                                           [(ngModel)]="usuario.dni" #docu = "ngModel" pattern="^[0-9 .]{2,15}" required>
                                                        
                                                           <div class="alert-danger rounded mt-2" *ngIf="docu.invalid && (docu.dirty || docu.touched)">
                                                            <div *ngIf="docu.errors?.required">
                                                                <i class="ms-1 bi-x-circle-fill"></i>
                                                                El DNI es requerido
                                                            </div>
                                                             <div *ngIf="docu.errors?.pattern">
                                                                <i class="ms-1 bi-x-circle-fill"></i>
                                                                    Solo se permiten numeros
                                                             </div> 
                                                        </div>

                                                        </div>
                                                        
                                                        <!--group NombreUsuario -->

                                                      

                                                             <div class="form-group">
                                                                <label for="nombreUsuario">Nombre de usuario</label>
                                                                <input type="text" class="form-control mt-2" name ="nombreUsuario"id="nombreUsuario" 
                                                                [(ngModel)]="usuario.nombreUsuario" #NomUs = "ngModel" pattern="^[a-zA-Z-ÿ\u00f1\u00d1\u00E0-\u00FC ]{2,254}" required>
    
                                                    
                                                                <div class="alert-danger rounded mt-2" *ngIf="NomUs.invalid && (NomUs.dirty || NomUs.touched)">
                                                                    <div *ngIf="NomUs.errors?.required">
                                                                        <i class="ms-1 bi-x-circle-fill"></i>
                                                                        El nombre de usuario es requerido
                                                                    </div>
                                                                     <div *ngIf="NomUs.errors?.pattern">
                                                                        <i class="ms-1 bi-x-circle-fill"></i>
                                                                        Solo se permiten letras
                                                                    </div> 
                                                                </div>
                                                            </div>
           

                                                       
                                                     

                                                       <!--group Email -->
                                                        
                                                     
                                                        <div class="form-group">
                                                            <label for="email">E-mail</label>
                                                            <input type="text" class="form-control mt-2" name ="email"id="email" placeholder="E-mail" 
                                                            [(ngModel)]="usuario.email" #corre = "ngModel" pattern="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$" required>

                                                
                                                            <div class="alert-danger rounded mt-2" *ngIf="corre.invalid && (corre.dirty || corre.touched)">
                                                                <div *ngIf="corre.errors?.required">
                                                                    <i class="ms-1 bi-x-circle-fill"></i>
                                                                    El E-mail es requerido
                                                                </div>
                                                                 <div *ngIf="corre.errors?.pattern">
                                                                    <i class="ms-1 bi-x-circle-fill"></i>
                                                                    Ingrese una direccion de E-mail valida: ejemplo@ejemplo.com
                                                                </div> 
                                                            </div>
                                                        </div>
       
                                                    
                                                        

                                                         <!--group telefono -->
                                                         <div class="form-group">
                                                            <label for="telefono">Teléfono</label>
                                                            <input type="text" class="form-control mt-2" name ="telefono"id="telefono" placeholder="Teléfono" 
                                                            [(ngModel)]="usuario.telefono" #tele = "ngModel" pattern="^[0-9 -]{2,15}" required>
                                                            
                                                            <div class="alert-danger rounded mt-2" *ngIf="tele.invalid && (tele.dirty || tele.touched)">
                                                                <div *ngIf="tele.errors?.required">
                                                                    <i class="ms-1 bi-x-circle-fill"></i>
                                                                    El teléfono es requerido
                                                                </div>
                                                                 <div *ngIf="tele.errors?.pattern">
                                                                    <i class="ms-1 bi-x-circle-fill"></i>
                                                                        Solo se permiten números
                                                                </div> 
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="card-footer text-center mt-3">
                                                            <button class=" btn btn-outline-success btn-block" [disabled]="!f.valid" style="margin-left: 10px"><i class="bi bi-pencil-fill"></i> Modificar</button>
                                                            <button class="btn btn-outline-danger btn-block" style="margin-left: 10px"  routerLink="/index">
                                                                 <i class="fas fa-arrow-alt-circle-left"></i> Volver</button>
                                                        </div>
                                                   </form>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-5 ">
                                    <div class="row ">
                                        <div class="col-12">
                                            <div class="card shadow">
                                                <div class="card-header bg-warning text-white"> 
                                                    
                                                    <i class="fa-solid fa-user-secret"></i>
                                                    Modificar roles </div>
                                                    
                                                <div class="card-body">
                                                    <!-- roles -->
                                                <!-- group roles-->
                                                <div class="form-group mt-2">
                                                    <div class="form-check form-switch mt-2" *ngFor="let rol of roles; let i = index; ">
                                                        <input class="form-check-input" type="checkbox" id={{roles[i].name}} [(ngModel)] = "roles[i].active" > 
                                                        <label class="form-check-label fw-bold" for={{roles[i].name}} id={{roles[i].name}}>{{rol.name}}</label>
                                                        <p>{{rol.description}}</p>
                                                        
                                                    </div>
                                                    
                                                </div>
                                                <!-- fin roles-->
                                                </div>
                                            </div>
                            
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>

                        </div>
                 </div>
        </div>
            
    </div>
</div>