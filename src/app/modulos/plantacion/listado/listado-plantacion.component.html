<app-menu></app-menu> 
<div class="card">

    <div class="container fadein animation-iteration-1 animation-duration-500">
        <p-breadcrumb class="m-2" [model]="items" [home]="home"></p-breadcrumb>
        <div class="row d-flex justify-content-center">
            <p-card styleClass="shadow-1 mb-4" header="Plantacion">
              <div class="p-2">
                                          
                <label for="nomreFinca" class="form-label">Seleccione la finca</label>
                <select class="form-select" name="finca" id="nomreFinca"
                [(ngModel)]="usuarioProductor" aria-label=".form-select-lg example" required>
                <option [value]="finca.idFinca" *ngFor="let finca of fincas">
                
                    {{ finca.nombre }}
                    
                </option>
                
                </select>
             </div>
                <p-table #dt [value]="listadoPlantacion" responsiveLayout="stack" styleClass="p-datatable-striped p-datatable-sm"
                dataKey="id" [rows]="5" [showCurrentPageReport]="true" [rowsPerPageOptions]="[5,10,15]" [loading]="loading"
                [rowHover]="true" [paginator]="true"
                currentPageReportTemplate="Mostrando {first} de {last} de un total de {totalRecords} registros"
                [filterDelay]="0">

                <!-- botones y selector finca-->
                <ng-template pTemplate="caption">
                    <div class="d-flex justify-content-between">
                        <button pRipple *ngIf="isProductor" pButton class="p-button-rounded p-button-sm me-1"  icon="bi bi-plus-circle" label="Nueva plantaciń" routerLink="/plantacion/crearPlantacion"></button>
                        <button pRipple pButton class="p-button-sm p-button-outlined p-button-rounded me-1"  icon="pi pi-filter-slash" label="Limpiar Filtros" (click)="clear(dt)"></button>
                     </div>

                     
                </ng-template>

                <!-- fin -->
                
                <ng-template pTemplate="header">
                    <tr class="text-center">

                        <!-- Columna id -->
                        <th class="text-center" pSortableColumn="idPlantacion">
                            <div class="p-d-flex p-jc-between p-ai-center">
                              Id
                              <p-sortIcon field="idPlantacion"></p-sortIcon>
                              <p-columnFilter type="numeric" field="idPlantacion" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                          </th>
                        <!-- fin -->

                        <!-- Columna cultivo -->
                        <th class="text-center" pSortableColumn="nombreTipoCultivo">
                            <div class="p-d-flex p-jc-between p-ai-center">
                            Cultivo
                            <p-sortIcon field="nombreTipoCultivo"></p-sortIcon>
                            <p-columnFilter type="text" field="nombreTipoCultivo" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                        </th>
                         <!-- fin -->


                         <!-- Columna entre hileras -->
                         <th class="text-center" pSortableColumn="entreIleras">
                            <div class="p-d-flex p-jc-between p-ai-center">
                              Marco plantación e/h
                              <p-sortIcon field="entreIleras"></p-sortIcon>
                              <p-columnFilter type="numeric" field="entreIleras" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                          </th>
                        <!-- fin -->

                         <!-- Columna entre plantas -->
                         <th class="text-center" pSortableColumn="entrePlantas">
                            <div class="p-d-flex p-jc-between p-ai-center">
                              Marco plantación e/p
                              <p-sortIcon field="entrePlantas"></p-sortIcon>
                              <p-columnFilter type="numeric" field="entrePlantas" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                          </th>
                        <!-- fin -->

                         <!-- Columna sistema de riego -->
                         <th class="text-center" pSortableColumn="sistemaRiego">
                            <div class="p-d-flex p-jc-between p-ai-center">
                            Sistema de riego
                            <p-sortIcon field="sistemaRiego"></p-sortIcon>
                            <p-columnFilter type="text" field="sistemaRiego" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                        </th>
                         <!-- fin -->

                           <!-- Columna sistema de trasplante -->
                           <th class="text-center" pSortableColumn="sistemaTrasplante">
                            <div class="p-d-flex p-jc-between p-ai-center">
                            Sistema de Trasplante
                            <p-sortIcon field="sistemaTrasplante"></p-sortIcon>
                            <p-columnFilter type="text" field="sistemaTrasplante" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                        </th>
                         <!-- fin -->

                          
                          <!-- Columna cantidad plantines -->
                          <!-- <th class="text-center" pSortableColumn="cantidadPlantines">
                            <div class="p-d-flex p-jc-between p-ai-center">
                              Cantidad plantines
                              <p-sortIcon field="cantidadPlantines"></p-sortIcon>
                              <p-columnFilter type="numeric" field="cantidadPlantines" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                          </th> -->
                        <!-- fin -->

                          <!-- Columna observación -->
                          <!-- <th class="text-center" pSortableColumn="observacion">
                            <div class="p-d-flex p-jc-between p-ai-center">
                            Observación
                            <p-sortIcon field="observacion"></p-sortIcon>
                            <p-columnFilter type="text" field="observacion" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                        </th> -->
                         <!-- fin -->

                          <!-- Columna justificación -->
                          <!-- <th class="text-center" pSortableColumn="justificacion">
                            <div class="p-d-flex p-jc-between p-ai-center">
                            Justificación de modificación
                            <p-sortIcon field="justificacion"></p-sortIcon>
                            <p-columnFilter type="text" field="justificacion" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                        </th> -->
                         <!-- fin -->

                          <!-- columna Numero de cuadros-->
                          <th class="text-center" pSortableColumn="numerosDeCuadros" scope="col">
                            <div class="p-d-flex p-jc-between p-ai-center">
                            Numero de cuadros
                            <p-sortIcon field="numerosDeCuadros"></p-sortIcon>
                            <p-columnFilter type="text" field="numerosDeCuadros" display="menu" class="p-ml-auto"></p-columnFilter>
                            </div>
                          </th>

                          <!-- fin -->

                          <!-- columna fecha cracion-->
                          <!-- <th class="text-center" pSortableColumn="fechaCreacionPlantacion">
                            Creación
                            <p-sortIcon field="fechaCreacionPlantacion"></p-sortIcon>
                            <p-columnFilter type="date" field="fechaCreacionPlantacion" display="menu" class="p-ml-auto"></p-columnFilter>
                        </th> -->
                        <!-- -- columna fecha actualizacion-->
                            <!-- <th class="text-center" pSortableColumn="fechaModificacionPlantacion">
                                <div class="p-d-flex p-jc-between p-ai-center">
                                    Modificación                               
                                    <p-sortIcon field="fechaModificacionPlantacion"></p-sortIcon>
                                    <p-columnFilter type="date" field="fechaModificacionPlantacion" display="menu" class="p-ml-auto"></p-columnFilter>
                                </div>
                            </th>  -->
                            <!-- fin -->

                            <!-- Acciones -->
                            <th class="text-center" pSortableColumn="ver"> 
                              <div class="p-d-flex p-jc-between p-ai-center"></div>
                              Acciones
                            </th>
                            <th class="text-center" pSortableColumn="ver"> 
                              <div class="p-d-flex p-jc-between p-ai-center"></div>
                          </th>
                            <!-- fin -->
                    </tr>

                </ng-template>

                <ng-template pTemplate="body" let-plantacion>
                  
                  <tr>
                    <td>{{plantacion.idPlantacion}}</td>
                    <td>{{plantacion.nombreTipoCultivo.nombre}}</td>
                    <td>{{plantacion.entreIleras}}</td>
                    <td>{{plantacion.entrePlantas}}</td>
                    <td>{{plantacion.sistemaRiego}}</td>
                    <td>{{plantacion.sistemaTrasplante}}</td>
                    
                    <td><span class="p-column-title">Cuadros</span><ul *ngFor="let numerosDeCuadros of plantacion.numerosDeCuadros; let i = index; ">
               
                      <td>{{plantacion.numerosDeCuadros[i].numeroCuadro}}</td>
                    
                    </ul></td>
                    
                     <!--Boton Detalle -->
                      <td class="text-center">
                        <button pRipple  class="btn btn-outline-info" routerLink="/usuario/obtner/" pTooltip="Detalle" tooltipPosition="top"
                        icon="" >
                        <i class="fas fa-eye"></i>
                      </button>
                      </td> 
                      <!-- find -->

                       <!--Boton Editar -->
                      <td class="text-center">
                          <button pRipple class="btn btn-outline-warning" 
                          routerLink="/usuario/actualizar/" pTooltip="Editar" tooltipPosition="top">
                          <i class="fa-solid fa-marker"></i></button> 
                      </td>
                      <!-- fin -->

                  </tr>

                </ng-template>

                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td class="text-center" colspan="8">No se encontraron registros.</td>
                  </tr>
                </ng-template>

                </p-table>

            </p-card>
        </div>

    </div>
</div>

